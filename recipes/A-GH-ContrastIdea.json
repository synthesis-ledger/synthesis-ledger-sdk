{
  "id": 74,
  "successBps": 9806,
  "cid": "ar://SYNTH_ATOMIC_GH_CONTRASTIDEA",
  "costUsd": 1500,
  "details": "# A-GH-ContrastIdea Technical Specification\n\n## 1. Core Logic Definition\n\n**A-GH-ContrastIdea** is an analytical framework for evaluating competing architectural decisions through quantified contrast scoring, enabling data-driven selection between mutually exclusive implementation paths.\n\n### 1.1 Contrast Function\n\n```\nC(A, B) = Σᵢ₌₁ⁿ wᵢ × |δᵢ(A) - δᵢ(B)| / max(δᵢ(A), δᵢ(B))\n```\n\nWhere:\n- `C(A, B)` = Contrast score between ideas A and B\n- `wᵢ` = Weight coefficient for dimension i (Σwᵢ = 1)\n- `δᵢ(X)` = Normalized score of idea X on dimension i\n- `n` = Number of evaluation dimensions\n\n### 1.2 Decision Threshold Logic\n\n```\nIF C(A, B) ≥ τ_decisive (0.65):\n    SELECT max(Σ(wᵢ × δᵢ))\nELIF C(A, B) ≥ τ_marginal (0.35):\n    ESCALATE to architectural review\nELSE:\n    APPLY cost_minimization_selector()\n```\n\n---\n\n## 2. Breakdown Point Score (BPS) Matrix\n\n### 2.1 BPS Calculation Formula\n\n```\nBPS(component) = (P_failure × I_severity × D_detection) / M_mitigation\n\nWhere:\n- P_failure ∈ [0.0, 1.0]  (Probability of failure)\n- I_severity ∈ [1, 10]     (Impact severity)\n- D_detection ∈ [1, 10]    (Detection difficulty, inverse scale)\n- M_mitigation ∈ [1, 10]   (Mitigation effectiveness)\n```\n\n### 2.2 BPS Risk Classification\n\n| BPS Range | Risk Level | Action Required |\n|-----------|------------|-----------------|\n| 0.00 - 0.25 | LOW | Monitor only |\n| 0.26 - 0.50 | MODERATE | Implement alerting |\n| 0.51 - 0.75 | HIGH | Require redundancy |\n| 0.76 - 1.00 | CRITICAL | Block deployment |\n\n### 2.3 Operational Failure Risk Matrix\n\n| Failure Mode | P_failure | I_severity | D_detection | M_mitigation | **BPS** |\n|--------------|-----------|------------|-------------|--------------|---------|\n| Input Schema Violation | 0.15 | 4 | 2 | 8 | **0.015** |\n| Contrast Calculation Overflow | 0.05 | 7 | 3 | 6 | **0.018** |\n| Weight Normalization Drift | 0.20 | 6 | 7 | 5 | **0.168** |\n| Decision Threshold Misconfiguration | 0.10 | 9 | 5 | 4 | **0.113** |\n| Dimension Score Staleness | 0.30 | 5 | 6 | 7 | **0.129** |\n| Concurrent Evaluation Race | 0.08 | 8 | 8 | 3 | **0.171** |\n| Persistence Layer Failure | 0.03 | 10 | 2 | 9 | **0.007** |\n| Escalation Path Unavailable | 0.12 | 7 | 4 | 6 | **0.056** |\n\n### 2.4 Aggregate System BPS\n\n```\nBPS_system = 1 - Πᵢ(1 - BPSᵢ)\nBPS_system = 1 - (0.985 × 0.982 × 0.832 × 0.887 × 0.871 × 0.829 × 0.993 × 0.944)\nBPS_system = 0.482 [MODERATE RISK]\n```\n\n---\n\n## 3. JSON Schema for Input Validation\n\n```json\n{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://sre.internal/schemas/a-gh-contrast-idea/v1\",\n  \"title\": \"A-GH-ContrastIdea Input Schema\",\n  \"type\": \"object\",\n  \"required\": [\"evaluation_id\", \"ideas\", \"dimensions\", \"thresholds\"],\n  \"additionalProperties\": false,\n  \"properties\": {\n    \"evaluation_id\": {\n      \"type\": \"string\",\n      \"pattern\": \"^[A-Z]{2}-[0-9]{8}-[a-f0-9]{12}$\",\n      \"description\": \"Unique evaluation identifier\"\n    },\n    \"timestamp_utc\": {\n      \"type\": \"string\",\n      \"format\": \"date-time\"\n    },\n    \"ideas\": {\n      \"type\": \"array\",\n      \"minItems\": 2,\n      \"maxItems\": 10,\n      \"items\": {\n        \"$ref\": \"#/$defs/idea\"\n      }\n    },\n    \"dimensions\": {\n      \"type\": \"array\",\n      \"minItems\": 3,\n      \"maxItems\": 20,\n      \"items\": {\n        \"$ref\": \"#/$defs/dimension\"\n      }\n    },\n    \"thresholds\": {\n      \"$ref\": \"#/$defs/thresholds\"\n    },\n    \"metadata\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"requester\": {\n          \"type\": \"string\",\n          \"minLength\": 1,\n          \"maxLength\": 128\n        },\n        \"context\": {\n          \"type\": \"string\",\n          \"maxLength\": 2048\n        },\n        \"ttl_seconds\": {\n          \"type\": \"integer\",\n          \"minimum\": 300,\n          \"maximum\": 604800,\n          \"default\": 86400\n        }\n      }\n    }\n  },\n  \"$defs\": {\n    \"idea\": {\n      \"type\": \"object\",\n      \"required\": [\"idea_id\", \"name\", \"scores\"],\n      \"properties\": {\n        \"idea_id\": {\n          \"type\": \"string\",\n          \"pattern\": \"^IDEA-[A-Z0-9]{6}$\"\n        },\n        \"name\": {\n          \"type\": \"string\",\n          \"minLength\": 1,\n          \"maxLength\": 256\n        },\n        \"scores\": {\n          \"type\": \"object\",\n          \"additionalProperties\": {\n            \"type\": \"number\",\n            \"minimum\": 0.0,\n            \"maximum\": 1.0\n          },\n          \"minProperties\": 3\n        }\n      }\n    },\n    \"dimension\": {\n      \"type\": \"object\",\n      \"required\": [\"dimension_id\", \"weight\"],\n      \"properties\": {\n        \"dimension_id\": {\n          \"type\": \"string\",\n          \"pattern\": \"^DIM-[a-z_]{3,32}$\"\n        },\n        \"weight\": {\n          \"type\": \"number\",\n          \"minimum\": 0.01,\n          \"maximum\": 1.0\n        },\n        \"invert_preference\": {\n          \"type\": \"boolean\",\n          \"default\": false\n        }\n      }\n    },\n    \"thresholds\": {\n      \"type\": \"object\",\n      \"required\": [\"decisive\", \"marginal\"],\n      \"properties\": {\n        \"decisive\": {\n          \"type\": \"number\",\n          \"minimum\": 0.5,\n          \"maximum\": 0.95,\n          \"default\": 0.65\n        },\n        \"marginal\": {\n          \"type\": \"number\",\n          \"minimum\": 0.1,\n          \"maximum\": 0.5,\n          \"default\": 0.35\n        }\n      }\n    }\n  }\n}\n```\n\n### 3.1 Validation Rules Engine\n\n```\nRULE weight_sum_constraint:\n    Σ(dimensions[*].weight) ∈ [0.99, 1.01]\n    VIOLATION: REJECT with ERR_WEIGHT_NORMALIZATION\n\nRULE score_dimension_alignment:\n    ∀ idea ∈ ideas:\n        keys(idea.scores) ⊇ {d.dimension_id : d ∈ dimensions}\n    VIOLATION: REJECT with ERR_DIMENSION_MISMATCH\n\nRULE threshold_ordering:\n    thresholds.decisive > thresholds.marginal\n    VIOLATION: REJECT with ERR_THRESHOLD_INVERSION\n\nRULE idea_uniqueness:\n    |{i.idea_id : i ∈ ideas}| = |ideas|\n    VIOLATION: REJECT with ERR_DUPLICATE_IDEA\n```\n\n---\n\n## 4. SRE Metrics Specification\n\n### 4.1 Service Level Indicators (SLIs)\n\n| Metric Name | Type | Formula | Unit |\n|-------------|------|---------|------|\n| `contrast_calculation_latency_p99` | Latency | P99(t_complete - t_request) | ms |\n| `schema_validation_success_rate` | Availability | valid_requests / total_requests | ratio |\n| `decision_output_accuracy` | Quality | correct_decisions / total_decisions | ratio |\n| `evaluation_throughput` | Throughput | evaluations_completed / time_window | req/s |\n| `escalation_response_rate` | Reliability | escalations_acknowledged / escalations_triggered | ratio |\n\n### 4.2 Service Level Objectives (SLOs)\n\n```yaml\nslos:\n  - name: contrast_calculation_latency\n    target: 0.99\n    threshold: 200ms\n    window: 30d\n    burn_rate_alerts:\n      - severity: critical\n        short_window: 5m\n        long_window: 1h\n        factor: 14.4\n      - severity: warning\n        short_window: 30m\n        long_window: 6h\n        factor: 6.0\n\n  - name: schema_validation_availability\n    target: 0.999\n    window: 30d\n    error_budget: 43.2m\n\n  - name: decision_accuracy\n    target: 0.95\n    window: 7d\n    measurement: weekly_audit_sample\n\n  - name: escalation_acknowledgment\n    target: 0.98\n    threshold: 300s\n    window: 30d\n```\n\n### 4.3 Operational Metrics Dashboard Queries\n\n```promql\n# Contrast Calculation Latency P99\nhistogram_quantile(0.99,\n  sum(rate(contrast_calc_duration_seconds_bucket{service=\"a-gh-contrast-idea\"}[5m])) by (le)\n)\n\n# Schema Validation Error Rate\nsum(rate(schema_validation_total{status=\"failed\"}[5m])) /\nsum(rate(schema_validation_total[5m]))\n\n# Decision Distribution\nsum by (decision_type) (\n  increase(contrast_decisions_total{service=\"a-gh-contrast-idea\"}[1h])\n)\n\n# BPS Threshold Violations\ncount(bps_score{service=\"a-gh-contrast-idea\"} > 0.75)\n\n# Error Budget Remaining\n1 - (\n  sum(increase(contrast_errors_total[30d])) /\n  (sum(increase(contrast_requests_total[30d])) * (1 - 0.999))\n)\n```\n\n### 4.4 Alert Definitions\n\n```yaml\nalerts:\n  - name: ContrastCalcLatencyBudgetBurn\n    expr: |\n      (\n        sum(rate(contrast_calc_duration_seconds_count{status=\"success\"}[1h]))\n        -\n        sum(rate(contrast_calc_duration_seconds_bucket{le=\"0.2\"}[1h]))\n      ) / sum(rate(contrast_calc_duration_seconds_count[1h])) > 0.01\n    for: 5m\n    severity: critical\n    runbook: /runbooks/contrast-latency-degradation\n\n  - name: BPSCriticalThresholdBreach\n    expr: bps_score{service=\"a-gh-contrast-idea\"} > 0.75\n    for: 0m\n    severity: critical\n    runbook: /runbooks/bps-critical-response\n\n  - name: WeightNormalizationDrift\n    expr: |\n      abs(sum(dimension_weight{service=\"a-gh-contrast-idea\"}) - 1.0) > 0.01\n    for: 1m\n    severity: warning\n    runbook: /runbooks/weight-calibration\n\n  - name: EscalationPathFailure\n    expr: |\n      increase(escalation_failures_total[5m]) > 0\n    for: 0m\n    severity: critical\n    runbook: /runbooks/escalation-recovery\n```\n\n---\n\n## 5. Operational State Machine\n\n```\n                    ┌─────────────┐\n                    │   IDLE      │\n                    └──────┬──────┘\n                           │ receive_request\n                           ▼\n                    ┌─────────────┐\n              ┌─────│  VALIDATING │─────┐\n              │     └──────┬──────┘     │\n        invalid│           │valid       │timeout\n              ▼            ▼            ▼\n        ┌──────────┐ ┌───────────┐ ┌──────────┐\n        │ REJECTED │ │ COMPUTING │ │ TIMEOUT  │\n        └──────────┘ └─────┬─────┘ └──────────┘\n                           │\n              ┌────────────┼────────────┐\n              │            │            │\n        C≥τ_decisive  τ_marginal≤C<τ_decisive  C<τ_marginal\n              │            │            │\n              ▼            ▼            ▼\n        ┌──────────┐ ┌───────────┐ ┌──────────┐\n        │ DECISIVE │ │ ESCALATED │ │ COST_OPT │\n        └────┬─────┘ └─────┬─────┘ └────┬─────┘\n             │             │            │\n             └─────────────┼────────────┘\n                           ▼\n                    ┌─────────────┐\n                    │  COMPLETE   │\n                    └─────────────┘\n```\n\n---\n\n## 6. Failure Recovery Procedures\n\n| Failure State | Detection Method | Recovery Action | RTO |\n|---------------|------------------|-----------------|-----|\n| Schema Validation Failure | Synchronous rejection | Return ERR_SCHEMA with field path | 0ms |\n| Calculation Timeout | Circuit breaker trip | Retry with exponential backoff (max 3) | 30s |\n| Weight Drift | Continuous monitoring | Auto-normalize + alert | 5s |\n| Escalation Path Down | Health check failure | Fallback to async queue | 60s |\n| Persistence Failure | Write acknowledgment timeout | Write-ahead log replay | 120s |",
  "outcome": "A-GH-ContrastIdea",
  "rType": 0,
  "persona": "GH",
  "primary_model": "Grok-3-Extraction",
  "privacy_tier": "Public",
  "sybox_fee_split": {
    "dev": 0.5,
    "curation": 0.4,
    "author": 0.1
  },
  "ticker": "SYNL",
  "audit_cadence": "Weekly",
  "lifecycle": "Genesis-Platinum",
  "global_outputs": [
    "synthesis_id",
    "logic_id",
    "bps_verified",
    "model_stack",
    "processing_ms",
    "timestamp"
  ],
  "custom_outputs": [
    {
      "field_name": "Type",
      "type": "Description",
      "description": "Downstream Intent",
      "downstream_intent": "BPS Sensitivity",
      "bps_sensitivity": ""
    },
    {
      "field_name": "comparison_verdict",
      "type": "Object",
      "description": "The winning `idea_id`, `confidence_score`, and `contrast_classification`.",
      "downstream_intent": "**A-CTO-RoadmapMapper** for technical direction lock-in.",
      "bps_sensitivity": "High"
    },
    {
      "field_name": "dimension_variance_map",
      "type": "Object",
      "description": "Key-value pairs of dimensions where ideas diverged most sharply.",
      "downstream_intent": "**Stakeholder-Review-Bot** for targeted human-in-the-loop (HITL) gates.",
      "bps_sensitivity": "Medium"
    },
    {
      "field_name": "escalation_triggers",
      "type": "Array",
      "description": "Objects defining specific conditions that require human architectural review.",
      "downstream_intent": "**Project-Manager-Agent** for scheduling review sessions.",
      "bps_sensitivity": "High"
    },
    {
      "field_name": "risk_mitigation_strategy",
      "type": "String",
      "description": "A deterministic summary of required actions to offset the winner's weaknesses.",
      "downstream_intent": "**Compliance-Audit-Engine** for pre-deployment checklists.",
      "bps_sensitivity": "Low"
    }
  ]
}