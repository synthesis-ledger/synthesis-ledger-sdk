{
  "id": 41,
  "successBps": 9726,
  "cid": "ar://SYNTH_ATOMIC_DFI_POOLSIFTER",
  "costUsd": 1500,
  "details": "# A-DFI-PoolSifter Technical Specification\n\n## 1. System Overview\n\nA-DFI-PoolSifter is a DeFi liquidity pool analysis and filtering engine designed to evaluate, rank, and select optimal liquidity pools based on risk-adjusted returns, operational stability, and protocol health metrics.\n\n---\n\n## 2. Core Logic Architecture\n\n### 2.1 Pool Evaluation Function\n\n```\nPoolScore(p) = Σ(wᵢ × Mᵢ(p)) × RiskPenalty(p) × StabilityCoefficient(p)\n\nWhere:\n- p = pool instance\n- wᵢ = weight coefficient for metric i\n- Mᵢ = normalized metric function [0,1]\n- RiskPenalty ∈ (0,1]\n- StabilityCoefficient ∈ (0,1]\n```\n\n### 2.2 Metric Functions\n\n```\nM_yield(p) = min(1, APY(p) / APY_max)\n\nM_liquidity(p) = 1 - e^(-TVL(p) / TVL_threshold)\n\nM_volume(p) = tanh(Vol_24h(p) / Vol_baseline)\n\nM_age(p) = 1 - e^(-days_active(p) / 180)\n\nM_utilization(p) = 1 - |U(p) - U_optimal|² \n  where U_optimal = 0.80\n\nM_impermanent_loss(p) = max(0, 1 - IL_realized(p) / IL_tolerance)\n```\n\n### 2.3 Risk Penalty Calculation\n\n```\nRiskPenalty(p) = ∏(1 - Rⱼ(p) × Sⱼ)\n\nWhere:\n- Rⱼ = risk factor j ∈ {smart_contract, oracle, governance, liquidity}\n- Sⱼ = severity multiplier for factor j\n\nRisk Factors:\nR_contract(p) = (1 - audit_score(p)) × complexity_factor(p)\nR_oracle(p) = oracle_deviation_30d(p) / max_acceptable_deviation\nR_governance(p) = centralization_index(p) × admin_key_risk(p)\nR_liquidity(p) = max(0, 1 - (TVL(p) / min_TVL_threshold))\n```\n\n### 2.4 Stability Coefficient\n\n```\nStabilityCoefficient(p) = e^(-λ × Volatility_Index(p))\n\nVolatility_Index(p) = √(Var(returns_30d(p))) × √(Var(TVL_30d(p)))\n\nλ = 2.5 (decay constant)\n```\n\n---\n\n## 3. Breakdown Point Score (BPS) Matrix\n\n### 3.1 BPS Calculation Formula\n\n```\nBPS(component) = Σ(Impact_i × Probability_i × Detection_Difficulty_i) / 1000\n\nScale: 0-100 (Critical threshold: BPS ≥ 75)\n```\n\n### 3.2 Operational Failure Risk Matrix\n\n| Component | Failure Mode | Impact (1-10) | Probability (1-10) | Detection (1-10) | BPS |\n|-----------|--------------|---------------|-------------------|------------------|-----|\n| **Data Ingestion** | RPC endpoint failure | 9 | 6 | 3 | 16.2 |\n| **Data Ingestion** | Stale price data | 10 | 5 | 7 | 35.0 |\n| **Data Ingestion** | Rate limiting | 6 | 8 | 2 | 9.6 |\n| **Pool Scanner** | Missing pool detection | 8 | 4 | 8 | 25.6 |\n| **Pool Scanner** | Duplicate entries | 5 | 3 | 4 | 6.0 |\n| **Pool Scanner** | Chain reorg handling | 9 | 3 | 9 | 24.3 |\n| **Risk Engine** | Model drift | 8 | 6 | 9 | 43.2 |\n| **Risk Engine** | Calculation overflow | 10 | 2 | 5 | 10.0 |\n| **Risk Engine** | Weight misconfiguration | 7 | 4 | 6 | 16.8 |\n| **Ranking System** | Score normalization error | 7 | 3 | 5 | 10.5 |\n| **Ranking System** | Tie-breaking failure | 4 | 5 | 3 | 6.0 |\n| **Output Handler** | Serialization failure | 6 | 2 | 2 | 2.4 |\n| **Output Handler** | Timeout on large sets | 5 | 4 | 3 | 6.0 |\n| **Oracle Integration** | Price manipulation | 10 | 4 | 8 | 32.0 |\n| **Oracle Integration** | Latency spike | 7 | 7 | 4 | 19.6 |\n| **State Management** | Cache invalidation | 6 | 5 | 6 | 18.0 |\n| **State Management** | Memory exhaustion | 8 | 3 | 4 | 9.6 |\n\n### 3.3 Aggregate BPS by Subsystem\n\n```\nBPS_aggregate(subsystem) = max(BPS_components) + 0.3 × mean(BPS_components)\n\nSubsystem BPS Scores:\n├── Data Ingestion:     35.0 + 0.3(20.27) = 41.08\n├── Pool Scanner:       25.6 + 0.3(18.63) = 31.19\n├── Risk Engine:        43.2 + 0.3(23.33) = 50.20 [ELEVATED]\n├── Ranking System:     10.5 + 0.3(8.25)  = 12.98\n├── Output Handler:     6.0 + 0.3(4.20)   = 7.26\n├── Oracle Integration: 32.0 + 0.3(25.80) = 39.74\n└── State Management:   18.0 + 0.3(13.80) = 22.14\n\nSystem Total BPS: 50.20 (Highest subsystem)\n```\n\n### 3.4 BPS Threshold Actions\n\n| BPS Range | Status | Required Action |\n|-----------|--------|-----------------|\n| 0-25 | GREEN | Standard monitoring |\n| 26-50 | YELLOW | Enhanced alerting, weekly review |\n| 51-75 | ORANGE | Immediate mitigation plan, daily review |\n| 76-100 | RED | System halt, incident response |\n\n---\n\n## 4. Input Validation JSON Schema\n\n```json\n{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://a-dfi.io/schemas/poolsifter/v1/input.json\",\n  \"title\": \"A-DFI-PoolSifter Input Schema\",\n  \"type\": \"object\",\n  \"required\": [\"request_id\", \"timestamp\", \"chain_config\", \"filter_criteria\", \"ranking_params\"],\n  \"additionalProperties\": false,\n  \"properties\": {\n    \"request_id\": {\n      \"type\": \"string\",\n      \"pattern\": \"^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}$\",\n      \"description\": \"UUID v4 request identifier\"\n    },\n    \"timestamp\": {\n      \"type\": \"integer\",\n      \"minimum\": 1600000000,\n      \"maximum\": 2000000000,\n      \"description\": \"Unix timestamp in seconds\"\n    },\n    \"chain_config\": {\n      \"type\": \"object\",\n      \"required\": [\"chain_id\", \"rpc_endpoints\"],\n      \"properties\": {\n        \"chain_id\": {\n          \"type\": \"integer\",\n          \"enum\": [1, 10, 56, 137, 250, 42161, 43114],\n          \"description\": \"EVM chain identifier\"\n        },\n        \"rpc_endpoints\": {\n          \"type\": \"array\",\n          \"minItems\": 1,\n          \"maxItems\": 5,\n          \"items\": {\n            \"type\": \"string\",\n            \"format\": \"uri\",\n            \"pattern\": \"^https?://\"\n          }\n        },\n        \"block_confirmations\": {\n          \"type\": \"integer\",\n          \"minimum\": 1,\n          \"maximum\": 256,\n          \"default\": 12\n        }\n      }\n    },\n    \"filter_criteria\": {\n      \"type\": \"object\",\n      \"required\": [\"min_tvl\", \"min_age_days\"],\n      \"properties\": {\n        \"min_tvl\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 1000000000000,\n          \"description\": \"Minimum TVL in USD\"\n        },\n        \"max_tvl\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 1000000000000\n        },\n        \"min_age_days\": {\n          \"type\": \"integer\",\n          \"minimum\": 0,\n          \"maximum\": 3650\n        },\n        \"min_apy\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 100000,\n          \"description\": \"Minimum APY as percentage\"\n        },\n        \"max_apy\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 100000\n        },\n        \"protocol_whitelist\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\",\n            \"pattern\": \"^0x[a-fA-F0-9]{40}$\"\n          },\n          \"maxItems\": 100\n        },\n        \"protocol_blacklist\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\",\n            \"pattern\": \"^0x[a-fA-F0-9]{40}$\"\n          },\n          \"maxItems\": 100\n        },\n        \"token_requirements\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"must_include\": {\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\",\n                \"pattern\": \"^0x[a-fA-F0-9]{40}$\"\n              }\n            },\n            \"must_exclude\": {\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\",\n                \"pattern\": \"^0x[a-fA-F0-9]{40}$\"\n              }\n            }\n          }\n        },\n        \"pool_types\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\",\n            \"enum\": [\"CONSTANT_PRODUCT\", \"STABLE_SWAP\", \"CONCENTRATED\", \"WEIGHTED\", \"METAPOOL\"]\n          }\n        },\n        \"audit_required\": {\n          \"type\": \"boolean\",\n          \"default\": true\n        },\n        \"max_impermanent_loss_30d\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 100,\n          \"description\": \"Maximum IL percentage over 30 days\"\n        }\n      }\n    },\n    \"ranking_params\": {\n      \"type\": \"object\",\n      \"required\": [\"weights\", \"result_limit\"],\n      \"properties\": {\n        \"weights\": {\n          \"type\": \"object\",\n          \"required\": [\"yield\", \"liquidity\", \"volume\", \"age\", \"utilization\", \"impermanent_loss\"],\n          \"properties\": {\n            \"yield\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 1 },\n            \"liquidity\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 1 },\n            \"volume\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 1 },\n            \"age\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 1 },\n            \"utilization\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 1 },\n            \"impermanent_loss\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 1 }\n          },\n          \"additionalProperties\": false\n        },\n        \"result_limit\": {\n          \"type\": \"integer\",\n          \"minimum\": 1,\n          \"maximum\": 1000\n        },\n        \"sort_order\": {\n          \"type\": \"string\",\n          \"enum\": [\"DESC\", \"ASC\"],\n          \"default\": \"DESC\"\n        },\n        \"tie_breaker\": {\n          \"type\": \"string\",\n          \"enum\": [\"TVL\", \"AGE\", \"VOLUME\", \"APY\"],\n          \"default\": \"TVL\"\n        }\n      }\n    },\n    \"risk_tolerance\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"max_contract_risk\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 1,\n          \"default\": 0.3\n        },\n        \"max_oracle_risk\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 1,\n          \"default\": 0.2\n        },\n        \"max_governance_risk\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 1,\n          \"default\": 0.4\n        },\n        \"max_liquidity_risk\": {\n          \"type\": \"number\",\n          \"minimum\": 0,\n          \"maximum\": 1,\n          \"default\": 0.25\n        }\n      }\n    },\n    \"execution_config\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"timeout_ms\": {\n          \"type\": \"integer\",\n          \"minimum\": 1000,\n          \"maximum\": 300000,\n          \"default\": 30000\n        },\n        \"cache_ttl_seconds\": {\n          \"type\": \"integer\",\n          \"minimum\": 0,\n          \"maximum\": 3600,\n          \"default\": 300\n        },\n        \"parallel_workers\": {\n          \"type\": \"integer\",\n          \"minimum\": 1,\n          \"maximum\": 32,\n          \"default\": 8\n        },\n        \"retry_policy\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"max_retries\": {\n              \"type\": \"integer\",\n              \"minimum\": 0,\n              \"maximum\": 10,\n              \"default\": 3\n            },\n            \"backoff_multiplier\": {\n              \"type\": \"number\",\n              \"minimum\": 1,\n              \"maximum\": 5,\n              \"default\": 2\n            },\n            \"initial_delay_ms\": {\n              \"type\": \"integer\",\n              \"minimum\": 100,\n              \"maximum\": 10000,\n              \"default\": 1000\n            }\n          }\n        }\n      }\n    }\n  },\n  \"allOf\": [\n    {\n      \"if\": {\n        \"properties\": {\n          \"filter_criteria\": {\n            \"properties\": {\n              \"min_tvl\": { \"type\": \"number\" },\n              \"max_tvl\": { \"type\": \"number\" }\n            },\n            \"required\": [\"min_tvl\", \"max_tvl\"]\n          }\n        }\n      },\n      \"then\": {\n        \"properties\": {\n          \"filter_criteria\": {\n            \"properties\": {\n              \"max_tvl\": {\n                \"exclusiveMinimum\": { \"$data\": \"1/min_tvl\" }\n              }\n            }\n          }\n        }\n      }\n    }\n  ]\n}\n```\n\n### 4.1 Weight Normalization Constraint\n\n```\nValidation Rule: Σ(weights) = 1.0 ± 0.001\n\nImplementation:\nif |Σ(w) - 1.0| > 0.001:\n    raise ValidationError(\"WEIGHT_SUM_INVALID\", sum=Σ(w))\n```",
  "outcome": "A-DFI-PoolSifter",
  "rType": 0,
  "persona": "DFI",
  "primary_model": "Grok-3-Extraction",
  "privacy_tier": "Public",
  "sybox_fee_split": {
    "dev": 0.5,
    "curation": 0.4,
    "author": 0.1
  },
  "ticker": "SYNL",
  "audit_cadence": "Daily",
  "lifecycle": "Genesis-Platinum",
  "global_outputs": [
    "synthesis_id",
    "logic_id",
    "bps_verified",
    "model_stack",
    "processing_ms",
    "timestamp"
  ],
  "custom_outputs": [
    {
      "field_name": "Type",
      "type": "Description",
      "description": "Downstream Intent",
      "downstream_intent": "BPS Sensitivity",
      "bps_sensitivity": ""
    }
  ]
}